<!doctype html><html amp lang="en" class="amp"><head><meta charset="utf-8"><title>How to manage remote server users with ansible</title><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta property="og:title" content="How to manage remote server users with ansible"/><meta property="og:image" content="https://keksi.io/img/keksi-labs-og-small.png"/><meta name="twitter:image:alt" content="Keksi.io logo"/><meta property="og:image:width" content="300"/><meta property="og:image:height" content="300"/><meta name="twitter:site" content="keksiengineer"/><meta name="twitter:creator" content="koodimonni"/><meta property="og:type" content="website"/><meta property="og:description" content="Full speed ahead in Web engineering
"/><meta property="og:url" content="https://keksi.io/amp/tutorials/2016/12/05/how-to-manage-remote-server-users-with-ansible/"/><meta property="og:locale" content="en_US"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="canonical" href="/tutorials/2016/12/05/how-to-manage-remote-server-users-with-ansible/"><link rel="alternate" type="application/atom+xml" title="Keksi.io" href="https://keksi.io/feed.xml"/><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> <style amp-custom>
        
        /*! normalize.css v3.0.2 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.highlight{background:#272822;padding:20px;color:#ffffff}.highlight table td{padding:5px}.highlight table pre{margin:0}.highlight .gh{color:#999999}.highlight .sr{color:#f6aa11}.highlight .go{color:#888888}.highlight .gp{color:#555555}.highlight .gu{color:#aaaaaa}.highlight .nb{color:#f6aa11}.highlight .cm{color:#75715e}.highlight .cp{color:#75715e}.highlight .c1{color:#75715e}.highlight .cs{color:#75715e}.highlight .c,.highlight .cd{color:#75715e}.highlight .err{color:#960050}.highlight .gr{color:#960050}.highlight .gt{color:#960050}.highlight .gd{color:#49483e}.highlight .gi{color:#49483e}.highlight .ge{color:#49483e}.highlight .kc{color:#66d9ef}.highlight .kd{color:#66d9ef}.highlight .kr{color:#66d9ef}.highlight .no{color:#66d9ef}.highlight .kt{color:#66d9ef}.highlight .mf{color:#ae81ff}.highlight .mh{color:#ae81ff}.highlight .il{color:#ae81ff}.highlight .mi{color:#ae81ff}.highlight .mo{color:#ae81ff}.highlight .m,.highlight .mb,.highlight .mx{color:#ae81ff}.highlight .sc{color:#ae81ff}.highlight .se{color:#ae81ff}.highlight .ss{color:#ae81ff}.highlight .sd{color:#e6db74}.highlight .s2{color:#e6db74}.highlight .sb{color:#e6db74}.highlight .sh{color:#e6db74}.highlight .si{color:#e6db74}.highlight .sx{color:#e6db74}.highlight .s1{color:#e6db74}.highlight .s{color:#e6db74}.highlight .na{color:#a6e22e}.highlight .nc{color:#a6e22e}.highlight .nd{color:#a6e22e}.highlight .ne{color:#a6e22e}.highlight .nf{color:#a6e22e}.highlight .vc{color:#ffffff}.highlight .nn{color:#ffffff}.highlight .nl{color:#ffffff}.highlight .ni{color:#ffffff}.highlight .bp{color:#ffffff}.highlight .vg{color:#ffffff}.highlight .vi{color:#ffffff}.highlight .nv{color:#ffffff}.highlight .w{color:#ffffff}.highlight .n,.highlight .py,.highlight .nx{color:#ffffff}.highlight .ow{color:#f92672}.highlight .nt{color:#f92672}.highlight .k,.highlight .kv{color:#f92672}.highlight .kn{color:#f92672}.highlight .kp{color:#f92672}.highlight .o{color:#f92672}code.highlighter-rouge{padding:0.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,0.09);border-radius:3px}.container{margin:0 auto;max-width:112rem;padding:0 2rem;position:relative;width:100%}.row{display:flex;flex-direction:column;padding:0;width:100%}.row.row-no-padding{padding:0}.row.row-no-padding>.column{padding:0}.row.row-wrap{flex-wrap:wrap}.row.row-top{align-items:flex-start}.row.row-bottom{align-items:flex-end}.row.row-center{align-items:center}.row.row-stretch{align-items:stretch}.row.row-baseline{align-items:baseline}.row .column{display:block;flex:1;margin-left:0;max-width:100%;width:100%}.row .column.column-offset-10{margin-left:10%}.row .column.column-offset-20{margin-left:20%}.row .column.column-offset-25{margin-left:25%}.row .column.column-offset-33,.row .column.column-offset-34{margin-left:33.3333%}.row .column.column-offset-50{margin-left:50%}.row .column.column-offset-66,.row .column.column-offset-67{margin-left:66.6666%}.row .column.column-offset-75{margin-left:75%}.row .column.column-offset-80{margin-left:80%}.row .column.column-offset-90{margin-left:90%}.row .column.column-10{flex:0 0 10%;max-width:10%}.row .column.column-20{flex:0 0 20%;max-width:20%}.row .column.column-25{flex:0 0 25%;max-width:25%}.row .column.column-33,.row .column.column-34{flex:0 0 33.3333%;max-width:33.3333%}.row .column.column-40{flex:0 0 40%;max-width:40%}.row .column.column-50{flex:0 0 50%;max-width:50%}.row .column.column-60{flex:0 0 60%;max-width:60%}.row .column.column-66,.row .column.column-67{flex:0 0 66.6666%;max-width:66.6666%}.row .column.column-75{flex:0 0 75%;max-width:75%}.row .column.column-80{flex:0 0 80%;max-width:80%}.row .column.column-90{flex:0 0 90%;max-width:90%}.row .column .column-top{align-self:flex-start}.row .column .column-bottom{align-self:flex-end}.row .column .column-center{align-self:center}@media (min-width: 40rem){.row{flex-direction:row;margin-left:-1rem;width:calc(100% + 2.0rem)}.row .column{margin-bottom:inherit;padding:0 1rem}}*{margin:0;padding:0;box-sizing:border-box}figure{margin:0}.gist table tbody tr td{box-sizing:content-box}html{background:#fff}::selection{background:#D4D4D4}::-moz-selection{background:#D4D4D4}body{color:#383838;font-family:"Open Sans",Helvetica,Arial,sans-serif;font-size:1.25em;word-wrap:break-word}h1,h2,h3,h4,h5,h6{font-family:"Open Sans",Helvetica,Arial,sans-serif;line-height:1.3;margin:0.67em 0}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{color:#383838}@media (min-width: 600px){h1{font-size:2.5em}h2{font-size:2em}h3{font-size:1.5em}h4{font-size:1.15em}}@media (max-width: 599px){.post-content h1{font-size:0.9em}.post-teaser h1{font-size:1.5em}}blockquote{border-left:2px solid;padding:1em 1em}blockquote p:last-child,footer p:last-child{margin-bottom:0}table{table-layout:fixed;width:100%;word-wrap:break-word}@media (max-width: 1100px){table{overflow-x:scroll;display:inline-block}}td,th{padding:0.5em 1em;border:1px solid rgba(0,0,0,0.1);text-align:left}table,dl,blockquote,code,kbd,pre,samp{margin:1em 0}@media (max-width: 500px){pre.highlight{font-size:0.7em;padding:10px;margin-left:-2em;margin-right:-2em}}dt{font-weight:bold}dd{margin-left:2em}p,ol,ul,dl,.math-display{line-height:1.5;margin-bottom:1em}.math-display{display:inline-block;width:100%}li>ul,li>ol{margin-bottom:0;margin-left:1em}ol,ul{list-style-position:inside}hr{border:0;border-top:1px solid rgba(0,0,0,0.1);border-bottom:1px solid #fff;margin:1em 0}a{color:#1ABC9C;text-decoration:none}.nav{list-style:none;margin:0;padding:0}iframe,img,embed,object,video{max-width:100%}img[align=left]{margin-right:3%}img[align=right]{margin-left:3%}.site-header{padding:3% 6%}@media (max-width: 1000px){.site-header{padding:3% 3%}}section.category-archive,section.tag-archive,article,.comments,.feature-image .post-content,.call-out,.posts .post-teaser,.site-footer{padding:5% 20%}@media (max-width: 500px){section.category-archive,section.tag-archive,article,.comments,.feature-image .post-content,.call-out,.posts .post-teaser,.site-footer{padding:7.5% 10%}}@media (max-width: 1000px){section.category-archive,section.tag-archive,article,.comments,.feature-image .post-content,.call-out,.posts .post-teaser,.site-footer{padding:7.5% 12.5%}}article a:hover,.posts .post-teaser p a:hover{text-decoration:underline;color:#117964}.button{border-radius:0.3em;border:1px solid;display:inline-block;margin:1em 0;padding:0.5em 0.75em}a.button:hover,#post-nav a:hover{background:#1ABC9C;border:1px solid #1ABC9C;color:#fff;text-decoration:none}.disabled{opacity:0.7}@media (max-width: 500px){.visually-hidden-mobile{position:absolute;overflow:hidden;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;border:0}}.hidden{display:none}.img-circle{border-radius:50%}.post-meta .post-category{color:inherit}.post-meta .post-category:hover{color:#F98752}.post-meta{padding-top:10px}.post-meta .tag:before{content:"#"}section.category-archive{border-bottom:1px solid rgba(0,0,0,0.1)}section.category-archive .category-header{text-align:center;padding-top:5em}section.category-archive .archive-name{color:#F98752}section.category-archive .post-teaser{padding:0;border-bottom:none}section.tag-archive{border-bottom:1px solid rgba(0,0,0,0.1)}section.tag-archive .tag-header{text-align:center;padding-top:5em}section.tag-archive .tag-header h1 a{text-color:#1ABC9C}section.tag-archive .post-teaser{padding:0;border-bottom:none}section.tag-archive ul.tags{list-style:none}section.tag-archive ul.tags li{font-size:2em;padding-left:0.3em;display:inline-block}.meta-author-image{vertical-align:middle;margin-right:5px}article,.comments{border-bottom:1px solid rgba(0,0,0,0.1);float:left;width:100%}.amp .post-about{padding-bottom:1em}article .post-meta{padding-top:1em}article .post-meta .description{padding-top:5px}article header{margin-bottom:6%;text-align:center}article .footnotes{color:rgba(0,0,0,0.4)}article .post-content .description{padding-top:5px;padding-bottom:5px}article .post-content .description:before{font-weight:bold;content:"In short: "}article .post-content img{box-shadow:3px 4px 10px 0px #777;width:auto;height:auto;max-width:100%}header h1{margin:0}header .meta{color:rgba(56,56,56,0.5);font-size:0.9em;letter-spacing:0.1em;margin:0;text-transform:uppercase}.feature-image{padding:0%}.feature-image .post-link{color:#fff}.feature-image header{color:#fff;background-size:cover;margin-bottom:0;padding:8% 20%}.feature-image header .meta{color:rgba(255,255,255,0.7)}#post-nav{width:100%;border-bottom:1px solid rgba(0,0,0,0.1);display:flex;float:left}#post-nav a,#post-nav .page-title{display:inline-block}#post-nav .page-title{font-size:1.2em;margin-bottom:1em;width:100%}#post-nav a{padding:2em 3em;border:1px solid rgba(255,255,255,0);text-align:center;width:50%}#post-nav i{vertical-align:middle}.call-out{display:inline-block;width:100%;background-color:#F98752;background-size:cover;font-size:1.2em;text-align:center;color:#FFF}@media screen and (max-width: 900px){.call-out{font-size:.9em}}@media screen and (max-width: 600px){.call-out{font-size:.6em;padding:7.5% 7.5%}}.call-out p:last-child{margin-bottom:0}.posts .post-meta{list-style:none}.posts .post-meta li{display:inline-block;padding-right:10px}.posts .post-meta .fa{padding-right:3px}.posts .post-teaser{width:100%;margin-bottom:0;display:inline-block;background-size:cover;border-bottom:1px solid rgba(0,0,0,0.1)}.posts .excerpt{margin-top:1em}.pagination .button{margin:0 1.5em}.pagination .button i{vertical-align:middle}.pagination{padding:5% 20% 0 20%;text-align:center}.site-header{background:#fff;border-bottom:1px solid rgba(0,0,0,0.1);display:inline-block;float:left;width:100%;font-size:1.1em;display:flex}.site-header a{color:#383838}.site-header .avatar{height:2em;width:2em;float:left;margin-top:-3px;border-radius:0.2em;margin-right:0.5em;-webkit-transition:-webkit-transform 0.8s ease-in-out;transition:transform 0.8s ease-in-out}.site-header .avatar:hover{-webkit-transform:rotate(360deg);transform:rotate(360deg)}.site-header .site-title{float:left;font-weight:bold;font-size:1em;line-height:1.5}@media (min-width: 600px){.site-header{justify-content:space-between}.site-header .branding{flex-grow:3}}@media (max-width: 599px){.site-header{flex-wrap:wrap;justify-content:space-between}.site-header .branding,.site-header .external-links,.site-header .site-nav{padding-top:2.5%;padding-bottom:2.5%}.site-header .branding{order:1;min-width:150px}.site-header .external-links{order:2;min-width:200px}.site-header .site-nav{min-width:300px;order:3}.site-header .site-nav ul li{float:left}.site-header .site-nav,.site-header .external-links,.site-header ul,.site-header li{margin-left:0.4em}}.site-header .site-nav ul,.site-header .external-links ul{margin:0;padding:0;list-style:none;line-height:1.5;text-align:right}.site-header .site-nav li,.site-header .external-links li{display:inline;margin-right:0.4em}@media (max-width: 1100px){.site-header .site-nav ul,.site-header .external-links ul{display:inline-block;width:100%}}.site-footer{display:inline-block;text-align:center;width:100%;color:#858585;font-size:0.9em}.site-footer h1{font-size:2em}.site-footer .column{padding:3.5% 3.5%}.site-footer .footer-content{text-align:left}@media (min-width: 640px){.site-footer .footer-content{display:inline-block}}.site-footer #contact{line-height:1.4em}.site-footer #contact .url{color:inherit;text-decoration:inherit;pointer-events:none;cursor:default}.site-footer #contact a{color:#F98752}.site-footer .notice{padding:2%}.site-footer .notice img{vertical-align:bottom}

    </style><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript> <script async src="https://cdn.ampproject.org/v0.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script></head><body> <header class="site-header"><div class="branding"> <a href="/"> <amp-img class="avatar" src="/img/keksi-labs-logo-small.png" width="44" height="44" layout="fixed" alt="Keksi Labs Logo"/></amp-img><h1 class="site-title">Keksi.io</h1> </a></div> <nav class="site-nav"><ul><li> <a class="page-link" href="/about/"> About </a></li></ul> </nav><nav class="external-links"><ul><li> <a href="mailto:hello@keksi.io" title="Email"> <i class="fa fa-fw fa-envelope"></i> </a></li><li> <a href="https://github.com/KeksiLabs" title="Follow on GitHub"> <i class="fa fa-fw fa-github"></i> </a></li><li> <a href="https://twitter.com/keksiengineer" title="Follow on Twitter"> <i class="fa fa-fw fa-twitter"></i> </a></li></ul> </nav> </header><article><h1 class="post-title">How to manage remote server users with ansible</h1><div class="post-about"> <span class="visually-hidden-mobile">Written by</span> <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href="https://keybase.io/onnimonni" title="Posts by Onni Hakala" rel="author" class="url fn n" itemprop="url"> <amp-img itemprop="image" class="img-circle meta-author-image" width="40" height="40" alt="Onni Hakala" src="https://s.gravatar.com/avatar/ffbe81bf9fa424901ddc06be226c98a4"></amp-img> <span itemprop="name">Onni Hakala</span></a></span> on <time class="entry-published updated" datetime="2016-12-05T00:00:00+0000" itemprop="datePublished" title="Monday, December  5, 2016">December 5, 2016</time><span class="visually-hidden-mobile">.</span><p class="description"> <span class="visually-hidden-mobile">This article is</span> about <span itemprop="keywords"> <strong>ansible</strong>, <strong>devops</strong> and <strong>servers</strong>. </span></p></div><p>This post shows an powerful example of how to do user access management for admin/developer user accounts for medium to big sized web agencies. Managing users efficiently and securely in big company usually includes a clunky process like LDAP. Today I will show you how to use git and ansible instead.</p><h2 id="introduction">Introduction</h2><p>When companies grow and start to have tens or hundreds of servers it starts to take enormous amount of time to create users into the servers manually. Many web agencies just get tired and allow <code class="highlighter-rouge">root</code> user access for all of their administrators/developers.</p><p>This is a bad practise which should be always avoided because it makes auditing so much harder. What about if a person leaves the company or their laptop and private ssh keys get stolen? Then you would need to revoke the access ASAP and this will be harder if the company doesn’t keep record of all of their users and their access levels.</p><p>Many developers also won’t understand how dangerous it is to paste the same root user passwords in plaintext in sms, email or company chat like slack. It’s quite easy to gain access to any of those medias.</p><h2 id="ansible-and-ssh-keys-to-the-rescue">Ansible and ssh keys to the rescue</h2><p>We in Keksi Labs have helped multiple smaller companies to manage this problem with configuration management.</p><p>The solution is to keep record of all of the granted users in git and use ansible to deploy all of the changes.</p><p>This is passwordless solution for remote server access with ssh.</p><p>If you want to see full real world example look into our github:</p><p><a href="https://github.com/KeksiLabs/ansible-user-management-example">KeksiLabs/ansible-user-management-example</a>.</p><h3 id="tutorial-for-ansible-and-git">Tutorial for ansible and git</h3><p>Here’s quick example for how to do this with ansible. More advanced users should see the provided repository mentioned earlier.</p><h3 id="step-1-create-a-project">Step 1. Create a project</h3><div class="language-console highlighter-rouge"> <pre class="highlight"><code><span class="w">$ </span><span class="nc">mkdir</span><span class="kv"> user-management-ansible
</span><span class="w">$ </span><span class="nc">cd</span><span class="kv"> user-management-ansible
</span><span class="w">$ </span><span class="nc">git</span><span class="kv"> init .
</span></code></pre></div><h3 id="step-2-copy-example-ansible-into-your-project">Step 2: Copy example ansible into your project</h3><p>Copy this provided <code class="highlighter-rouge">yml</code> ansbile config into file named <code class="highlighter-rouge">users.yml</code>.</p><p>Let’s see what this does:</p><ul><li>It creates new group called <code class="highlighter-rouge">infra_admin</code> and gives it sudo privileges.</li><li>It checks that provided users exist in the target machines with their ssh keys</li><li>It deletes users which should be absent</li></ul><div class="language-yml highlighter-rouge"> <pre class="highlight"><code><span class="c1">##</span>
<span class="c1"># This ansible playbook handles and creates all provided users from</span>
<span class="c1"># company_admin_list</span>
<span class="c1">#</span>
<span class="c1"># For more advanced but similiar setup see: https://github.com/KeksiLabs/ansible-user-management-example</span>
<span class="c1">##</span>
<span class="nn">---</span>
<span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Install all users</span>
  <span class="s">hosts</span><span class="pi">:</span> <span class="s">all</span>
  <span class="s">become</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">vars</span><span class="pi">:</span>
    <span class="s">admin_group</span><span class="pi">:</span> <span class="s1">'</span><span class="s">infra_admin'</span>
    <span class="s">company_admin_list</span><span class="pi">:</span>
      <span class="c1"># This is how add users to servers</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Onni</span><span class="nv"> </span><span class="s">Hakala"</span>
        <span class="s">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">onnimonni"</span>
        <span class="s">keys</span><span class="pi">:</span>
          <span class="s">active</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">ssh-rsa</span><span class="nv"> </span><span class="s">AAAAB3NzaC1yc2EAAAADAQABAAABgQC8gOdvYe12yaVQGMZXgn0qcd7vxMZhj1wsBTDFP/HnwdnbywbV/jt//yGex51cTkfqoP3YlkdgUfQeKJws4j7rxu04gx6uRBIlRcR+7wdcFgksFs4EFumTpZOSOwKybHVIbeIubLi76+mhB9L2JXD4f+TtkL0WJtvBDsCavGLHbru2JafS3K/6b97sU2vpmA/mDREKDpnuVxcMXsXlY0THgoxx70L7SjYsWMzRYiJc+FWzMqyi1yribhEUuUT4ch6B7DiBuPfWFQUlA2KkGbihsw+Kmyrw0e36z1MOEWAhroczt8zKjawWeYQ4qTwQRrjM8b+C2yfFgBpUqFAhAM0Lb9dh8V3xfui30zik2eW2LTQ4JtD2xNUflA+NvG2+fcB7w3ub+QNXI3zp+Joto627oB3j4Nao+s/XHOd0T8idHVrbfhoRK8UE4r6nKI8b5b7JrzaDipE1CjS2TsIixaj9a/VxYMtNE2A9JPGHsXlIPpi++GaW+rz4DZoqkArfsFE=</span><span class="nv"> </span><span class="s">onni@keksi.io"</span>
          <span class="s">disabled</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">ssh-rsa</span><span class="nv"> </span><span class="s">AAAAB3NzaC1yc2EAAAADAQABAAABAQCsPoDM21LjBodcS3Kiq7ZDyNjFY4L03Yx2nSoSzdV7TKj00Zk8gh1hSSgI/xSDXiK+QEbfPuh/7+G3sfeDDNavjWUA1kdLve4D6MTI302C3HilK6wOZV67ezyAgdgf/VCHfx+no+bocw/05r1VamLrnFjDasWAQFFeFLaOnfQTArHQRl2Z8+4ZtZ1YQPhnleFQfEz546D3oWE1DS3vuXL1Qodz3gijtHhGnc3jaQM+7m/gg2vrcL6bc/vCtdunpA1fSQrBSx0kK4qdTWwc2LZDwKIT3YP5GthvgkFHsbCo2mNdBwWZfOBTYr5LBpz9YBcO7oVBWVEI00BdEPRFOYJL</span><span class="nv"> </span><span class="s">onnimonni@Onni-MacBook-Air.local"</span>
        <span class="s">shell</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/bin/bash"</span>
        <span class="s">state</span><span class="pi">:</span> <span class="s">present</span>
      <span class="c1"># This is how you remove users</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Example</span><span class="nv"> </span><span class="s">Quitted</span><span class="nv"> </span><span class="s">Person"</span>
        <span class="s">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">example-quitted-person"</span>
        <span class="s">state</span><span class="pi">:</span> <span class="s">absent</span>

  <span class="s">tasks</span><span class="pi">:</span>

  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Setup all users</span>
    <span class="s">user</span><span class="pi">:</span>
      <span class="s">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.username</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.state</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default('present')</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">shell</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.shell</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default('/bin/bash')</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">group</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">admin_group</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">remove</span><span class="pi">:</span> <span class="s">yes</span>
    <span class="s">when</span><span class="pi">:</span> <span class="s">item.username is defined</span>
    <span class="s">with_items</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">full_admin_list</span><span class="nv"> </span><span class="s">}}"</span>

  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Add SSH-keys to users</span>
    <span class="s">authorized_key</span><span class="pi">:</span>
      <span class="s">user</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0.username</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.1</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="s">with_subelements</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">full_admin_list</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="pi">-</span> <span class="s">keys.active</span>
      <span class="pi">-</span> <span class="s">flags</span><span class="pi">:</span>
        <span class="s">skip_missing</span><span class="pi">:</span> <span class="s">True</span>
    <span class="s">when</span><span class="pi">:</span> <span class="s">item.0.state != "absent"</span>

  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Remove old SSH-keys from users</span>
    <span class="s">authorized_key</span><span class="pi">:</span>
      <span class="s">user</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0.username</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">item.1</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="s">state</span><span class="pi">:</span> <span class="s">absent</span>
    <span class="s">with_subelements</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">full_admin_list</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="pi">-</span> <span class="s">keys.disabled</span>
      <span class="pi">-</span> <span class="s">flags</span><span class="pi">:</span>
        <span class="s">skip_missing</span><span class="pi">:</span> <span class="s">True</span>
    <span class="s">when</span><span class="pi">:</span> <span class="s">item.0.state != "absent"</span>

  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Add admin group to sudoers</span>
    <span class="s">lineinfile</span><span class="pi">:</span> <span class="s">dest=/etc/sudoers regexp="^%{{ admin_group }}" line="%{{ admin_group }} ALL=(ALL) NOPASSWD:ALL"</span>

  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">Disable Requiretty from sudoers</span>
    <span class="s">lineinfile</span><span class="pi">:</span> <span class="s">dest=/etc/sudoers regexp="Defaults    requiretty" line="#Defaults    requiretty"</span>
</code></pre></div><h3 id="step-3-add-your-users">Step 3: Add your users</h3><p>Edit this section from the provided example and add your username and ssh keys. You don’t have to have any disabled keys when you start.</p><div class="language-yaml highlighter-rouge"> <pre class="highlight"><code><span class="s">company_admin_list</span><span class="pi">:</span>
  <span class="c1"># This is how add users to servers</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Onni</span><span class="nv"> </span><span class="s">Hakala"</span>
    <span class="s">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">onnimonni"</span>
    <span class="s">keys</span><span class="pi">:</span>
      <span class="s">active</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">ssh-rsa</span><span class="nv"> </span><span class="s">AAAAB3NzaC1yc2EAAAADAQABAAABgQC8gOdvYe12yaVQGMZXgn0qcd7vxMZhj1wsBTDFP/HnwdnbywbV/jt//yGex51cTkfqoP3YlkdgUfQeKJws4j7rxu04gx6uRBIlRcR+7wdcFgksFs4EFumTpZOSOwKybHVIbeIubLi76+mhB9L2JXD4f+TtkL0WJtvBDsCavGLHbru2JafS3K/6b97sU2vpmA/mDREKDpnuVxcMXsXlY0THgoxx70L7SjYsWMzRYiJc+FWzMqyi1yribhEUuUT4ch6B7DiBuPfWFQUlA2KkGbihsw+Kmyrw0e36z1MOEWAhroczt8zKjawWeYQ4qTwQRrjM8b+C2yfFgBpUqFAhAM0Lb9dh8V3xfui30zik2eW2LTQ4JtD2xNUflA+NvG2+fcB7w3ub+QNXI3zp+Joto627oB3j4Nao+s/XHOd0T8idHVrbfhoRK8UE4r6nKI8b5b7JrzaDipE1CjS2TsIixaj9a/VxYMtNE2A9JPGHsXlIPpi++GaW+rz4DZoqkArfsFE=</span><span class="nv"> </span><span class="s">onni@keksi.io"</span>
      <span class="s">disabled</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">ssh-rsa</span><span class="nv"> </span><span class="s">AAAAB3NzaC1yc2EAAAADAQABAAABAQCsPoDM21LjBodcS3Kiq7ZDyNjFY4L03Yx2nSoSzdV7TKj00Zk8gh1hSSgI/xSDXiK+QEbfPuh/7+G3sfeDDNavjWUA1kdLve4D6MTI302C3HilK6wOZV67ezyAgdgf/VCHfx+no+bocw/05r1VamLrnFjDasWAQFFeFLaOnfQTArHQRl2Z8+4ZtZ1YQPhnleFQfEz546D3oWE1DS3vuXL1Qodz3gijtHhGnc3jaQM+7m/gg2vrcL6bc/vCtdunpA1fSQrBSx0kK4qdTWwc2LZDwKIT3YP5GthvgkFHsbCo2mNdBwWZfOBTYr5LBpz9YBcO7oVBWVEI00BdEPRFOYJL</span><span class="nv"> </span><span class="s">onnimonni@Onni-MacBook-Air.local"</span>
    <span class="s">shell</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/bin/bash"</span>
    <span class="s">state</span><span class="pi">:</span> <span class="s">present</span>
  <span class="c1"># This is how you remove users</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Example</span><span class="nv"> </span><span class="s">Quitted</span><span class="nv"> </span><span class="s">Person"</span>
    <span class="s">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">example-quitted-person"</span>
    <span class="s">state</span><span class="pi">:</span> <span class="s">absent</span>
</code></pre></div><h3 id="step-4-add-your-servers">Step 4: Add your servers</h3><p>Create file called <code class="highlighter-rouge">inventory</code> with your servers in it:</p><p>Remember to use real IP addresses or hostnames instead of <code class="highlighter-rouge">xxx.xxx.xxx.xxx</code> or <code class="highlighter-rouge">yyy.yyy.yyy.yyy</code>.</p><div class="highlighter-rouge"> <pre class="highlight"><code>[servers]
xxx.xxx.xxx.xxx ansible_port=22
yyy.yyy.yyy.yyy ansible_port=22
</code></pre></div><p>You can use a custom ssh port by providing <code class="highlighter-rouge">ansible_port</code> variable.</p><h3 id="step-5-install-ansible">Step 5: Install ansible</h3><p>For OSX ansible can be installed with homebrew:</p><div class="language-console highlighter-rouge"> <pre class="highlight"><code><span class="w">$ </span><span class="nc">brew</span><span class="kv"> install ansible
</span></code></pre></div><p>Usually you want to use pip because it provides better version handling:</p><div class="language-console highlighter-rouge"> <pre class="highlight"><code><span class="w">$ </span><span class="nc">pip</span><span class="kv"> install ansible
</span></code></pre></div><h3 id="step-6-deploy-your-users">Step 6: Deploy your users</h3><p>You can use any user which is already setupped in the servers. When starting with the new servers it’s usually <code class="highlighter-rouge">root</code>.</p><p>This deploys all provided users with ansible:</p><div class="language-console highlighter-rouge"> <pre class="highlight"><code><span class="w">$ </span><span class="nc">ansible-playbook</span><span class="kv"> -i inventory users.yml -u root --ask-pass
</span></code></pre></div><h3 id="step-7-test-ssh-login">Step 7: Test ssh login</h3><p>Now try to login with the users that you created. Everything should just work.</p><h3 id="step-8-store-your-changes-in-git">Step 8: Store your changes in git</h3><p>Now commit all your changes:</p><div class="language-console highlighter-rouge"> <pre class="highlight"><code><span class="w">$ </span><span class="nc">git</span><span class="kv"> add --all
</span><span class="w">$ </span><span class="nc">git</span><span class="kv"> commit -am "Initial user setup"
</span></code></pre></div><h3 id="step-9-push-these-configs-in-private-git-repository">Step 9: Push these configs in private git repository</h3><p>It’s usually a good idea to share this setup with your workmates.</p><p>We recommend Github, Gitlab and Bitbucket. This repository doesn’t contain anything sensitive like plaintext passwords so It’s okay to put it into 3rd party version control.</p><h2 id="congratulations">Congratulations</h2><p>You are now managing all of your users with ansible. When you need to have more users just add them into the users array and deploy again. Remember to share your changes with your coworkers and teach them how to use this setup.</p><p>If you want to learn more you should head into our example repo: <a href="https://github.com/KeksiLabs/ansible-user-management-example">KeksiLabs/ansible-user-management-example</a>.</p></article> <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",

    "headline": "How to manage remote server users with ansible",
    
    "image":  {
        "@type": "ImageObject",
        "url": "https://keksi.io/tech/Ansible-Mark-Small-RGB-Mango.png",
        "caption": "Ansible",
        "height": "300",
        "width": "300"
    },
    
    
    "keywords": "ansible,devops,servers",
    "wordcount": "903",
    "publisher": {
        "@type": "Organization",
        "logo": {
            "@type": "ImageObject",
            "url": "https://keksi.io/logo.png",
            "width": "512",
            "height": "512"
        },
        "email": "hello@keksi.io",
        "name": "Keksi Labs Oy",
        "sameAs": [
            "https://twitter.com/keksiengineer",
            "https://github.com/KeksiLabs"
        ]
    },
    "url": "https://keksi.io/amp/tutorials/2016/12/05/how-to-manage-remote-server-users-with-ansible/",
    "mainEntityOfPage": "https://keksi.io/amp/tutorials/2016/12/05/how-to-manage-remote-server-users-with-ansible/",
    "datePublished": "2016-12-05",
    "dateCreated": "2016-12-05",
    "dateModified": "2017-01-10",
    "description": "Full speed ahead in Web engineering
",
    "articleBody": "This post shows an powerful example of how to do user access management for admin/developer user accounts for medium to big sized web agencies. Managing users efficiently and securely in big company usually includes a clunky process like LDAP. Today I will show you how to use git and ansible instead.## IntroductionWhen companies grow and start to have tens or hundreds of servers it starts to take enormous amount of time to create users into the servers manually. Many web agencies just get tired and allow `root` user access for all of their administrators/developers.This is a bad practise which should be always avoided because it makes auditing so much harder. What about if a person leaves the company or their laptop and private ssh keys get stolen? Then you would need to revoke the access ASAP and this will be harder if the company doesn't keep record of all of their users and their access levels.Many developers also won't understand how dangerous it is to paste the same root user passwords in plaintext in sms, email or company chat like slack. It's quite easy to gain access to any of those medias.## Ansible and ssh keys to the rescueWe in Keksi Labs have helped multiple smaller companies to manage this problem with configuration management.The solution is to keep record of all of the granted users in git and use ansible to deploy all of the changes.This is passwordless solution for remote server access with ssh.If you want to see full real world example look into our github:[KeksiLabs/ansible-user-management-example](https://github.com/KeksiLabs/ansible-user-management-example).### Tutorial for ansible and gitHere's quick example for how to do this with ansible. More advanced users should see the provided repository mentioned earlier.### Step 1. Create a project```console$ mkdir user-management-ansible$ cd user-management-ansible$ git init .```### Step 2: Copy example ansible into your projectCopy this provided `yml` ansbile config into file named `users.yml`.Let's see what this does:* It creates new group called `infra_admin` and gives it sudo privileges.* It checks that provided users exist in the target machines with their ssh keys* It deletes users which should be absent```yml {% raw %}### This ansible playbook handles and creates all provided users from# company_admin_list## For more advanced but similiar setup see: https://github.com/KeksiLabs/ansible-user-management-example##---- name: Install all users  hosts: all  become: true  vars:    admin_group: 'infra_admin'    company_admin_list:      # This is how add users to servers      - name: \"Onni Hakala\"        username: \"onnimonni\"        keys:          active:            - \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8gOdvYe12yaVQGMZXgn0qcd7vxMZhj1wsBTDFP/HnwdnbywbV/jt//yGex51cTkfqoP3YlkdgUfQeKJws4j7rxu04gx6uRBIlRcR+7wdcFgksFs4EFumTpZOSOwKybHVIbeIubLi76+mhB9L2JXD4f+TtkL0WJtvBDsCavGLHbru2JafS3K/6b97sU2vpmA/mDREKDpnuVxcMXsXlY0THgoxx70L7SjYsWMzRYiJc+FWzMqyi1yribhEUuUT4ch6B7DiBuPfWFQUlA2KkGbihsw+Kmyrw0e36z1MOEWAhroczt8zKjawWeYQ4qTwQRrjM8b+C2yfFgBpUqFAhAM0Lb9dh8V3xfui30zik2eW2LTQ4JtD2xNUflA+NvG2+fcB7w3ub+QNXI3zp+Joto627oB3j4Nao+s/XHOd0T8idHVrbfhoRK8UE4r6nKI8b5b7JrzaDipE1CjS2TsIixaj9a/VxYMtNE2A9JPGHsXlIPpi++GaW+rz4DZoqkArfsFE= onni@keksi.io\"          disabled:            - \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCsPoDM21LjBodcS3Kiq7ZDyNjFY4L03Yx2nSoSzdV7TKj00Zk8gh1hSSgI/xSDXiK+QEbfPuh/7+G3sfeDDNavjWUA1kdLve4D6MTI302C3HilK6wOZV67ezyAgdgf/VCHfx+no+bocw/05r1VamLrnFjDasWAQFFeFLaOnfQTArHQRl2Z8+4ZtZ1YQPhnleFQfEz546D3oWE1DS3vuXL1Qodz3gijtHhGnc3jaQM+7m/gg2vrcL6bc/vCtdunpA1fSQrBSx0kK4qdTWwc2LZDwKIT3YP5GthvgkFHsbCo2mNdBwWZfOBTYr5LBpz9YBcO7oVBWVEI00BdEPRFOYJL onnimonni@Onni-MacBook-Air.local\"        shell: \"/bin/bash\"        state: present      # This is how you remove users      - name: \"Example Quitted Person\"        username: \"example-quitted-person\"        state: absent  tasks:  - name: Setup all users    user:      name: \"{{ item.username }}\"      state: \"{{ item.state | default('present') }}\"      shell: \"{{ item.shell | default('/bin/bash') }}\"      group: \"{{ admin_group }}\"      remove: yes    when: item.username is defined    with_items:      - \"{{ full_admin_list }}\"  - name: Add SSH-keys to users    authorized_key:      user: \"{{ item.0.username }}\"      key: \"{{ item.1 }}\"    with_subelements:      - \"{{ full_admin_list }}\"      - keys.active      - flags:        skip_missing: True    when: item.0.state != \"absent\"  - name: Remove old SSH-keys from users    authorized_key:      user: \"{{ item.0.username }}\"      key: \"{{ item.1 }}\"      state: absent    with_subelements:      - \"{{ full_admin_list }}\"      - keys.disabled      - flags:        skip_missing: True    when: item.0.state != \"absent\"  - name: Add admin group to sudoers    lineinfile: dest=/etc/sudoers regexp=\"^%{{ admin_group }}\" line=\"%{{ admin_group }} ALL=(ALL) NOPASSWD:ALL\"  - name: Disable Requiretty from sudoers    lineinfile: dest=/etc/sudoers regexp=\"Defaults    requiretty\" line=\"#Defaults    requiretty\"{% endraw %}```### Step 3: Add your usersEdit this section from the provided example and add your username and ssh keys. You don't have to have any disabled keys when you start.```yamlcompany_admin_list:  # This is how add users to servers  - name: \"Onni Hakala\"    username: \"onnimonni\"    keys:      active:        - \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8gOdvYe12yaVQGMZXgn0qcd7vxMZhj1wsBTDFP/HnwdnbywbV/jt//yGex51cTkfqoP3YlkdgUfQeKJws4j7rxu04gx6uRBIlRcR+7wdcFgksFs4EFumTpZOSOwKybHVIbeIubLi76+mhB9L2JXD4f+TtkL0WJtvBDsCavGLHbru2JafS3K/6b97sU2vpmA/mDREKDpnuVxcMXsXlY0THgoxx70L7SjYsWMzRYiJc+FWzMqyi1yribhEUuUT4ch6B7DiBuPfWFQUlA2KkGbihsw+Kmyrw0e36z1MOEWAhroczt8zKjawWeYQ4qTwQRrjM8b+C2yfFgBpUqFAhAM0Lb9dh8V3xfui30zik2eW2LTQ4JtD2xNUflA+NvG2+fcB7w3ub+QNXI3zp+Joto627oB3j4Nao+s/XHOd0T8idHVrbfhoRK8UE4r6nKI8b5b7JrzaDipE1CjS2TsIixaj9a/VxYMtNE2A9JPGHsXlIPpi++GaW+rz4DZoqkArfsFE= onni@keksi.io\"      disabled:        - \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCsPoDM21LjBodcS3Kiq7ZDyNjFY4L03Yx2nSoSzdV7TKj00Zk8gh1hSSgI/xSDXiK+QEbfPuh/7+G3sfeDDNavjWUA1kdLve4D6MTI302C3HilK6wOZV67ezyAgdgf/VCHfx+no+bocw/05r1VamLrnFjDasWAQFFeFLaOnfQTArHQRl2Z8+4ZtZ1YQPhnleFQfEz546D3oWE1DS3vuXL1Qodz3gijtHhGnc3jaQM+7m/gg2vrcL6bc/vCtdunpA1fSQrBSx0kK4qdTWwc2LZDwKIT3YP5GthvgkFHsbCo2mNdBwWZfOBTYr5LBpz9YBcO7oVBWVEI00BdEPRFOYJL onnimonni@Onni-MacBook-Air.local\"    shell: \"/bin/bash\"    state: present  # This is how you remove users  - name: \"Example Quitted Person\"    username: \"example-quitted-person\"    state: absent```### Step 4: Add your serversCreate file called `inventory` with your servers in it:Remember to use real IP addresses or hostnames instead of `xxx.xxx.xxx.xxx` or `yyy.yyy.yyy.yyy`.```[servers]xxx.xxx.xxx.xxx ansible_port=22yyy.yyy.yyy.yyy ansible_port=22```You can use a custom ssh port by providing `ansible_port` variable.### Step 5: Install ansibleFor OSX ansible can be installed with homebrew:```console$ brew install ansible```Usually you want to use pip because it provides better version handling:```console$ pip install ansible```### Step 6: Deploy your usersYou can use any user which is already setupped in the servers. When starting with the new servers it's usually `root`.This deploys all provided users with ansible:```console$ ansible-playbook -i inventory users.yml -u root --ask-pass```### Step 7: Test ssh loginNow try to login with the users that you created. Everything should just work.### Step 8: Store your changes in gitNow commit all your changes:```console$ git add --all$ git commit -am \"Initial user setup\"```### Step 9: Push these configs in private git repositoryIt's usually a good idea to share this setup with your workmates.We recommend Github, Gitlab and Bitbucket. This repository doesn't contain anything sensitive like plaintext passwords so It's okay to put it into 3rd party version control.## CongratulationsYou are now managing all of your users with ansible. When you need to have more users just add them into the users array and deploy again. Remember to share your changes with your coworkers and teach them how to use this setup.If you want to learn more you should head into our example repo: [KeksiLabs/ansible-user-management-example](https://github.com/KeksiLabs/ansible-user-management-example).",
    "author": {
        "@type": "Person",
        "name": "Onni Hakala",
        "url": "https://keybase.io/onnimonni",
        "image": "https://s.gravatar.com/avatar/ffbe81bf9fa424901ddc06be226c98a4",
        
        "sameAs": [
            
            "https://twitter.com/koodimonni",
            
            
            "https://www.facebook.com/monnionni",
            
            
            "https://keybase.io/onnimonni",
            
            "https://github.com/onnimonni"
        ]
        
    }
}
</script><footer class="site-footer container"><div class="row"><div class="column"><div id="contact" class="footer-content vcard" itemscope itemtype="http://schema.org/Organization"><h1>Contact Us</h1><div><a class="url fn" itemprop="name" href="https://keksi.io/">Keksi Labs Oy</a></div><div><span itemprop="taxID">2734524-4</span></div> <a class="email" itemprop="email" href="mailto:hello@keksi.io">hello@keksi.io</a><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress" class="adr"> <span itemprop="addressLocality" class="locality">Tampere</span>, <span itemprop="addressCountry" class="country-name">Finland</span></div></div></div><div class="column"><div class="footer-content"><h1>What we do?</h1><p>Keksi is web solutions agency which uses latest open source tools to provide scalable web platforms. We believe in <strong>testing</strong>, <strong>monitoring</strong> and <strong>automation</strong>.</p><p>Because nobody wants to lose their good night's sleep worrying about crashing servers.</p><p></p></div></div></div><div class="notice"> <small>© Keksi Labs Oy</small>, <small>Disclaimer: We’re using cookies, because cookies are the best! Have one here: <amp-img class="avatar" src="/logo.svg" width="22" height="22" alt="Keksi Labs Logo" layout="fixed"> </amp-img></small></div> </footer><amp-analytics type="googleanalytics"> <script type="application/json">
{
  "vars": {
    "account": "UA-88238366-1"
  },
  "triggers": {
    "trackPageview": {
      "on": "visible",
      "request": "pageview"
    }
  }
}
</script></amp-analytics></body></html>